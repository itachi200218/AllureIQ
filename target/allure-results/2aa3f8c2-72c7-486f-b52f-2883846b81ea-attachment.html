<html>
<head>
    <meta charset='UTF-8'>
    <style>
        body { font-family:'Segoe UI',sans-serif;background:#f5f8fa;padding:25px;line-height:1.6; }
        h2,h3 { color:#0D47A1;margin-bottom:8px; }
        .subproject-card {
            background:#ffffff;
            border-left:6px solid #4285F4;
            border-radius:10px;
            padding:15px 20px;
            margin-bottom:20px;
            box-shadow:0 4px 10px rgba(0,0,0,0.08);
            transition: transform 0.2s ease;
        }
        .subproject-card:hover { transform: translateY(-2px); }
        .global-summary {
            background:#E3F2FD;
            padding:18px;
            border-left:6px solid #1A73E8;
            border-radius:10px;
            margin-bottom:25px;
        }
        .summary-footer {
            background:#E8EAF6;
            padding:15px;
            border-left:6px solid #3F51B5;
            border-radius:10px;
            margin-top:30px;
            font-size:14px;
        }
        .ai-search {
            background:#fff;
            border-left:6px solid #6C63FF;
            border-radius:10px;
            padding:15px;
            margin-bottom:25px;
            box-shadow:0 4px 10px rgba(0,0,0,0.08);
        }
        p { margin:6px 0; }
        code { background:#f0f3f6;padding:2px 5px;border-radius:4px; }
        input,button { font-size:14px; }
    </style>
</head>
<body>
    <h2>ğŸ“Š AI Subproject Analysis â€” AI-Allure-Reuse-luffy-master</h2>

    <div class='ai-search'>
        <h3>ğŸ” Search Historical AI Data</h3>
        <input id='searchInput' type='text' placeholder='Search keyword (e.g., login, error, endpoint)'
            style='padding:8px;width:60%;border-radius:8px;border:1px solid #ccc;'>
        <button onclick='searchAIData()'
            style='padding:8px 15px;background-color:#0078D7;color:white;border:none;border-radius:8px;margin-left:10px;'>
            Search
        </button>
        <div id='searchResults' style='margin-top:20px;'></div>
    </div>

    <div class='global-summary'>
    <h2>ğŸŒ Global Execution Overview</h2>
    <p><b>ğŸ“Š Overall Success Rate:</b> <span style='color:#0B8043;font-weight:700;'>92.31%</span><br>
    <b>ğŸ§© Total Subprojects:</b> 4<br>
    <b>ğŸ§¾ Total Endpoints Processed:</b> 39<br>
    <b>ğŸ” Data Source:</b> MongoDB Collection <code>ai_executions</code></p>
</div>
<h2 style='color:#1565C0;'>ğŸ§  Execution Summary â€” AI-Allure-Reuse-luffy-master</h2><hr style='border:1px solid #ccc;'>    <div class='subproject-card'>
        <h3>ğŸ“¦ UserAppTest</h3>
<p><b>ğŸ“… Previous Run:</b> 2025-11-09T20:17:38.088579300Z â€” 10 endpoints<br>
<b>ğŸ“… Latest Run:</b> 2025-11-10T21:02:02.983334900Z â€” 10 endpoints</p>
<p><b>ğŸ“Š Performance:</b><br>
â€¢ Previous Success Rate: <b>90.00%</b><br>
â€¢ Latest Success Rate: <b>90.00%</b><br>
â€¢ Î” Change: <b style='color:#1B5E20;'>+0.00%</b><br>
â€¢ Failures: 1 â†’ 1</p>
âœ… Stable endpoints.<br><p style='color:#424242;font-weight:600;font-size:13px;'>
ğŸ§¾ <b>Summary:</b> Between <b>2025-11-09T20:17:38.088579300Z</b> and <b>2025-11-10T21:02:02.983334900Z</b>, subproject <b>UserAppTest</b> showed a no major change â€”
from <b>90.00%</b> (1 fails) to <b>90.00%</b> (1 fails).
It maintained stability overall (Î” +0.00%).
</p>
<br></div>    <div class='subproject-card'>
        <h3>ğŸ“¦ FoodFinderTest</h3>
<p><b>ğŸ“… Previous Run:</b> 2025-11-09T20:17:05.986918300Z â€” 14 endpoints<br>
<b>ğŸ“… Latest Run:</b> 2025-11-10T21:00:49.379052500Z â€” 14 endpoints</p>
<p><b>ğŸ“Š Performance:</b><br>
â€¢ Previous Success Rate: <b>100.00%</b><br>
â€¢ Latest Success Rate: <b>100.00%</b><br>
â€¢ Î” Change: <b style='color:#1B5E20;'>+0.00%</b><br>
â€¢ Failures: 0 â†’ 0</p>
â• GET /api/auth/profile/admin_1762808445018<br>â– GET /api/auth/profile/admin_1762719422116<br><p style='color:#424242;font-weight:600;font-size:13px;'>
ğŸ§¾ <b>Summary:</b> Between <b>2025-11-09T20:17:05.986918300Z</b> and <b>2025-11-10T21:00:49.379052500Z</b>, subproject <b>FoodFinderTest</b> showed a no major change â€”
from <b>100.00%</b> (0 fails) to <b>100.00%</b> (0 fails).
It maintained stability overall (Î” +0.00%).
</p>
<br></div>    <div class='subproject-card'>
        <h3>ğŸ“¦ SocialMediaTest</h3>
<p><b>ğŸ“… Previous Run:</b> 2025-11-10T20:12:17.352478200Z â€” 11 endpoints<br>
<b>ğŸ“… Latest Run:</b> 2025-11-10T21:03:17.059550200Z â€” 11 endpoints</p>
<p><b>ğŸ“Š Performance:</b><br>
â€¢ Previous Success Rate: <b>81.82%</b><br>
â€¢ Latest Success Rate: <b>81.82%</b><br>
â€¢ Î” Change: <b style='color:#1B5E20;'>+0.00%</b><br>
â€¢ Failures: 2 â†’ 2</p>
â• DELETE /api/messages/6912531835f125adeea4310c<br>â• DELETE /api/posts/6912531435f125adeea43104<br>â– DELETE /api/messages/691247251fd8e117930422ea<br>â– DELETE /api/posts/691247211fd8e117930422e2<br>âŒ DELETE /api/messages/6912531835f125adeea4310c<br><p style='color:#424242;font-weight:600;font-size:13px;'>
ğŸ§¾ <b>Summary:</b> Between <b>2025-11-10T20:12:17.352478200Z</b> and <b>2025-11-10T21:03:17.059550200Z</b>, subproject <b>SocialMediaTest</b> showed a no major change â€”
from <b>81.82%</b> (2 fails) to <b>81.82%</b> (2 fails).
It maintained stability overall (Î” +0.00%).
</p>
<br></div>    <div class='subproject-card'>
        <h3>ğŸ“¦ TrackerTest</h3>
<p><b>ğŸ“… Previous Run:</b> 2025-11-10T22:36:42.486275400Z â€” 4 endpoints<br>
<b>ğŸ“… Latest Run:</b> 2025-11-10T22:39:57.114145Z â€” 4 endpoints</p>
<p><b>ğŸ“Š Performance:</b><br>
â€¢ Previous Success Rate: <b>100.00%</b><br>
â€¢ Latest Success Rate: <b>100.00%</b><br>
â€¢ Î” Change: <b style='color:#1B5E20;'>+0.00%</b><br>
â€¢ Failures: 0 â†’ 0</p>
â• DELETE https://student-job-tracker-1-q8rh.onrender.com/api/jobs/6912381a959f07be60d0abab<br>â• PUT https://student-job-tracker-1-q8rh.onrender.com/api/jobs/691204461e34b1609a0a3e65<br>â– PUT https://student-job-tracker-1-q8rh.onrender.com/api/jobs/6911f4ce5078ede2b3a493d3<br>â– DELETE https://student-job-tracker-1-q8rh.onrender.com/api/jobs/691263fd626289a03b745d0c<br><p style='color:#424242;font-weight:600;font-size:13px;'>
ğŸ§¾ <b>Summary:</b> Between <b>2025-11-10T22:36:42.486275400Z</b> and <b>2025-11-10T22:39:57.114145Z</b>, subproject <b>TrackerTest</b> showed a no major change â€”
from <b>100.00%</b> (0 fails) to <b>100.00%</b> (0 fails).
It maintained stability overall (Î” +0.00%).
</p>
<br></div>    <div class='summary-footer'>
        <p><b>ğŸ§¾ Summary:</b> Across <b>4</b> subprojects, <b>39</b> endpoints were analyzed,
        achieving an overall success rate of <b>92.31%</b>. Each subprojectâ€™s latest two runs
        were compared to measure stability, progress, and recurring issues.</p>
    </div>


 <script>
     async function searchAIData() {
         const query = document.getElementById("searchInput").value.trim();
         const resultsDiv = document.getElementById("searchResults");
         if (!query) {
             resultsDiv.innerHTML = "<p style='color:red;'>Please enter a search keyword.</p>";
             return;
         }
         resultsDiv.innerHTML = "<p>â³ Searching...</p>";

         // âœ… Automatically detect environment
         const isLocal = window.location.hostname.includes("localhost") || window.location.hostname.startsWith("192.");
         const baseUrl = isLocal
             ? "http://localhost:8081"  // local Spring Boot
             : "https://ai-allure-reuse-luffy.onrender.com"; // deployed Render backend

         try {
             const res = await fetch(`${baseUrl}/api/search?q=${encodeURIComponent(query)}`);
             if (!res.ok) throw new Error("Server not reachable");
             const data = await res.json();

             if (!data.results || Object.keys(data.results).length === 0) {
                 resultsDiv.innerHTML = "<p>No results found for <b>" + query + "</b>.</p>";
                 return;
             }

             let html = "";

             // âœ… Show AI summary FIRST (top of search results)
            // âœ… Enhanced AI summary (bullet-point style)
                if (data.ai_summary) {
                    html += `
                        <div style="
                            background:linear-gradient(135deg,#ede7f6,#f3e5f5);
                            border-left:6px solid #7B1FA2;
                            padding:15px 20px;
                            border-radius:12px;
                            box-shadow:0 3px 10px rgba(123,31,162,0.15);
                            margin-bottom:20px;
                            font-family:'Segoe UI',sans-serif;
                        ">
                            <h3 style="color:#4A148C;margin-bottom:10px;">ğŸ§  AI Summary Insights</h3>
                            <ul style="list-style:none;padding-left:0;margin:0;">
                                ${data.ai_summary.split('\n').map(line => {
                                    if (line.trim().startsWith('-')) {
                                        return `<li style="margin-bottom:6px;">ğŸ”¹ ${line.replace('-', '').trim()}</li>`;
                                    } else if (line.trim().startsWith('*')) {
                                        return `<li style="margin-bottom:6px;">âœ¨ ${line.replace('*', '').trim()}</li>`;
                                    } else {
                                        return `<li style="margin-bottom:6px;">ğŸ’¡ ${line.trim()}</li>`;
                                    }
                                }).join('')}
                            </ul>
                        </div>`;
                }

             // âœ… Then show all MongoDB collection results
             for (const [collection, docs] of Object.entries(data.results)) {
                 html += `<h4 style='color:#0078D7;'>ğŸ“‚ ${collection}</h4>`;
                 if (docs.length === 0) {
                     html += "<p><i>No entries found.</i></p>";
                 } else {
                     docs.forEach(doc => {
                         html += `<pre style='background:#f8f9fa;padding:10px;border-radius:6px;border:1px solid #ddd;'>${JSON.stringify(doc,null,2)}</pre>`;
                     });
                 }
             }

             resultsDiv.innerHTML = html;
         } catch (err) {
             resultsDiv.innerHTML = `<p style='color:red;'>âŒ Failed to fetch data: ${err.message}</p>`;
         }
     }
     </script>


</body>
</html>
